# 小奕畅聊功能测试指南

## 测试步骤

### 1. 基础界面测试

1. **打开应用**
   ```bash
   # 在项目目录下运行
   python -m http.server 8000
   # 然后访问 http://localhost:8000
   ```

2. **界面检查**
   - ✅ 左侧边栏显示"小奕畅聊"标题
   - ✅ 主聊天区域显示欢迎界面
   - ✅ 欢迎标题显示"欢迎使用小奕畅聊"
   - ✅ 底部输入框和发送按钮
   - ✅ 右上角设置按钮

### 2. 设置功能测试

1. **打开设置面板**
   - 点击右上角齿轮图标
   - 面板应从右侧滑出

2. **API密钥配置**
   - 输入OpenRouter API密钥
   - 可选：输入网站URL和名称
   - 验证"显示AI推理思考过程"开关（默认开启）
   - 验证"启用流式输出"开关（默认开启）
   - 点击保存按钮
   - 左下角API状态指示器变绿

### 3. 推理思考功能测试

1. **思考内容显示**
   - 确保设置中"显示AI推理思考过程"已开启
   - 发送一个复杂问题（如数学问题或逻辑推理）
   - 检查AI回复中是否包含"🧠 推理思考过程"区域
   - 默认状态应该是折叠的

2. **思考内容交互**
   - 点击"🧠 推理思考过程"标题
   - 验证思考内容展开显示
   - 再次点击验证内容收起
   - 检查展开图标的旋转动画

3. **思考开关控制**
   - 在设置中关闭"显示AI推理思考过程"
   - 发送新消息
   - 验证不显示思考内容区域
   - 重新开启设置，验证后续消息正常显示思考内容

### 4. 流式输出功能测试

1. **流式显示测试**
   - 确保设置中"启用流式输出"已开启
   - 发送一个问题（建议较长的问题）
   - 验证回复以流式方式显示：
     - 出现闪烁的蓝色光标 "|"
     - 内容逐步显示
     - Markdown格式实时渲染
   
2. **流式完成测试**
   - 等待流式输出完成
   - 验证光标消失
   - 验证思考内容区域正确显示（如果有）
   - 验证最终内容格式正确

3. **非流式模式测试**
   - 在设置中关闭"启用流式输出"
   - 发送新消息
   - 验证显示"正在思考"加载动画
   - 验证回复一次性完整显示
   - 重新开启流式输出，测试切换正常

### 5. 聊天功能测试

1. **预设提示词测试**
   - 点击任意预设卡片
   - 输入框应自动填入文本
   - 消息应正常发送

2. **手动输入测试**
   - 在输入框输入消息
   - 按Enter发送
   - 验证：
     - 用户消息正确显示
     - 显示"正在思考"加载动画
     - AI回复正确显示
     - Markdown格式正确渲染

3. **输入体验测试**
   - Shift+Enter换行功能
   - 输入框高度自适应
   - 长消息滚动显示

### 6. 响应式设计测试

1. **桌面端** (>768px)
   - 侧边栏固定显示
   - 双栏布局正常

2. **移动端** (<768px)
   - 侧边栏隐藏
   - 单栏布局
   - 触摸操作正常

### 7. 错误处理测试

1. **无API密钥**
   - 未配置密钥时发送消息
   - 应显示警告通知

2. **API错误**
   - 使用无效API密钥
   - 应显示错误消息

3. **网络错误**
   - 断网状态下发送消息
   - 应显示连接错误

## 预期结果

### 界面效果
- 深色主题，现代化设计
- 平滑动画和过渡效果
- 清晰的视觉层次
- 良好的可读性

### 功能表现
- API调用成功
- 消息发送流畅
- 实时响应显示
- 错误处理得当

### 性能指标
- 界面加载快速 (<2s)
- 消息发送响应 (<1s)
- 动画流畅 (60fps)
- 内存使用合理

## 常见问题排查

### 1. API调用失败
- 检查API密钥是否正确
- 验证网络连接
- 确认OpenRouter账户余额

### 2. 界面显示异常
- 检查浏览器控制台错误
- 确认所有文件加载正常
- 验证CSS样式生效

### 3. 响应式问题
- 测试不同屏幕尺寸
- 检查媒体查询
- 验证触摸交互

## 测试完成标准

- [ ] 所有界面元素正常显示（包括新的应用名称"小奕畅聊"）
- [ ] API密钥配置保存成功
- [ ] 推理思考功能正常工作
  - [ ] 思考内容正确显示和解析
  - [ ] 折叠/展开交互正常
  - [ ] 全局开关控制有效
- [ ] 流式输出功能正常工作
  - [ ] 流式显示效果正确（光标动画、逐步显示）
  - [ ] 流式和非流式模式切换正常
  - [ ] Markdown实时渲染正确
  - [ ] 流式完成后思考内容正确处理
- [ ] 聊天功能完全可用
- [ ] 响应式设计正常工作
- [ ] 错误处理机制有效
- [ ] 性能表现满足要求

测试完成后，小奕畅聊即可正常使用！
